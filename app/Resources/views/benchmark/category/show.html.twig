{% extends 'benchmark/index.html.twig' %}

{% set mainPath = 'category' %}
{% set title = title|default('title.categories')|trans %}
	
{% block content %}
	<div class="container-fluid">
		<div class="col-sm-2">
			{% block sidebar %}
				<div class="col-xs-12">
					<h3>{{ category.name }} {{ category.subname }}</h3>
				</div>
				
				{% block categoryFilterForm %}
					{% form_theme categoryFilter 'form/fields.html.twig' %}
					
					{{ form_start(categoryFilter) }}
						<div class="col-xs-12">
							{{ form_row(categoryFilter.category, { label: 'label.benchmark.category' }) }}
						</div>
						<div class="col-xs-12">
								{{ form_row(categoryFilter.submit, { 'icon': 'fa-check', 'label': 'action.submit', 'attr': {'class': 'btn btn-success'} }) }}
						</div>		
					{{ form_end(categoryFilter) }}
					
					{% form_theme subcategoryFilter 'form/fields.html.twig' %}
					
					{{ form_start(subcategoryFilter) }}
						<div class="col-xs-12">
							{{ form_row(subcategoryFilter.subcategory, { label: 'label.benchmark.subcategory' }) }}
						</div>
						<div class="col-xs-12">
							{{ form_row(subcategoryFilter.submit, { 'icon': 'fa-check', 'label': 'action.submit', 'attr': {'class': 'btn btn-success'} }) }}
						</div>	
					{{ form_end(subcategoryFilter) }}
				{% endblock %}
				
			{% endblock %}
		</div>
		<div class="col-sm-10">
			{% block itemContent %}
				<div class="row">
					<div class="col-sm-4 col-md-3">
						<div class="rect">
				    		{% if entry.image %}
								{% include 'common/image/image_entry.html.twig' with { 'entry': entry } %}
							{% endif %}
						</div>
					</div>
					<div class="col-sm-8 col-md-9">
						<h2 class="lowered-25">{{ entry.name }} {{ entry.subname }}</h2>
						<table class="table table-striped vert-align">
							<tr>
								<th class="text-center">{{ 'label.segment'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.numOfProducts'|trans }}</th>
							</tr>
							
							{% for segment in segments %}
								<tr>
									<th class="text-right">{{ segment.name }}</th>
									<td class="text-center">{{ segment.numOfProducts }}</td>
								</tr>
							{% endfor %}
							
							<tr>
								<th class="text-right">{{ 'label.benchmark.total'|trans }}</th>
								<th class="text-center">{{ numOfProducts }}</th>
							</tr>
						</table>
					</div>
				</div>
			{% endblock %}
			
			{% block tableContent %}
				{% if numberFields|length > 0 %}
					<div class="row lowered-25"></div>
					
					<div class="row">
						<table class="table table-striped vert-align">
							<tr>
								<th width="30%" class="text-center">{{ 'label.benchmark.param'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.min'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.max'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.mode'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.median'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.mean'|trans }}</th>
							</tr>
							
							<tr>
								<th class="text-right">{{ 'label.benchmark.product.price'|trans }}</th>
								<td class="text-center">{{ priceField.min|number_format(2, '.', ' ') }}</td>
								<td class="text-center">{{ priceField.max|number_format(2, '.', ' ') }}</td>
								<td class="text-center">{{ priceField.mode|number_format(2, '.', ' ') }}</td>
								<td class="text-center">{{ priceField.median|number_format(2, '.', ' ') }}</td>
								<td class="text-center">{{ priceField.mean|number_format(2, '.', ' ') }}</td>
							</tr>
								
							{% for field in numberFields %}
								<tr>
									<th class="text-right">{{ field.fieldName }}</td>
									<td class="text-center">{{ field.min|number_format(field.decimalPlaces, '.', ' ') }}</th>
									<td class="text-center">{{ field.max|number_format(field.decimalPlaces, '.', ' ') }}</td>
									<td class="text-center">{{ field.mode|number_format(field.decimalPlaces, '.', ' ') }}</td>
									<td class="text-center">{{ field.median|number_format(field.decimalPlaces, '.', ' ') }}</td>
									<td class="text-center">{{ field.mean|number_format(field.decimalPlaces, '.', ' ') }}</td>
								</tr>
							{% endfor %}
						</table>
					</div>
				{% endif %}
				
				{% if enumFields|length > 0 %}
					<div class="row lowered-25"></div>
					
					<div class="row">
						<table class="table table-striped vert-align">
							<tr>
								<th width="30%" class="text-center">{{ 'label.benchmark.param'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.values'|trans }}</th>
							</tr>
							{% for field in enumFields %}
								<tr>
									<th class="text-right">{{ field.fieldName }}</th>
									<td class="text-center">{{ field.values }}</td>
								</tr>
							{% endfor %}
						</table>
					</div>
				{% endif %}
				
				{% if boolFields|length > 0 %}
					<div class="row lowered-25"></div>
					
					<div class="row">
						<table class="table table-striped vert-align">
							<tr>
								<th width="30%" class="text-center">{{ 'label.benchmark.param'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.numOfProducts'|trans }}</th>
								<th class="text-center">{{ 'label.benchmark.percent'|trans }}</th>
							</tr>
							{% for field in boolFields %}
								<tr>
									<th class="text-right">{{ field.fieldName }}</th>
									<td class="text-center">{{ field.count }}</td>
									<td class="text-center">{{ (100 * field.count / numOfProducts)|number_format(0, '.', ' ') }}%</td>
								</tr>
							{% endfor %}
						</table>
					</div>
				{% endif %}
			{% endblock %}
		</div>	
	</div>
{% endblock %}
