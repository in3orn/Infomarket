{% extends 'infoprodukt/index.html.twig' %}

{% set title = entry.name %}
{% set mainPath = 'category' %}
		
{% block content %}
	
	{% if entry.preleaf %}
		<div class="row">
			<div class="rect-3x1">
				<img class="img-responsive div-center" src="{{ asset(entry.getImagePath()) }}">
				
				<div class="col-xs-12 div-bottom bkg-black-50 text-white">
					<div class="container-fluid lifted-bottom">
						<div class="row">
							<div class="col-xs-12">
								<h2>{{ entry.name }} klasyfikacja i podzial</h2>
{# 								<p>{{ entry.content | raw }}</p>#}
							</div>
						</div>
					</div>
				</div>
			</div>
			
			{% block categories %}
			<div class="container-fluid">
				<div class="row lifted-top">
					<div class="col-xs-12">
					{% include 'common/tile_list.html.twig' with {'entries': entry.children, 'entryPath': 'category', 'colSize': 2, 'tile': 'bottom_rect_tile' } %}
					</div>
				</div>
			</div>
			{% endblock %}
		</div>
		
		<div class="vr-space-80"></div>
		
		{% block featuredNews %}
		<div class="row">
			<div class="container">
				<h1>
					<span class="text-red">{{ 'header.articles'|trans }}</span> 
					<span class="text-brand">{{ 'header.news'|trans }}</span>
				</h1>
			</div>
			
			<div class="vr-space-20"></div>
			
				<div class="col-xs-12">
					<div class="col-sm-9">
						<div id="myCarousel" class="carousel slide" data-ride="carousel">
							<ol class="carousel-indicators">
						    	{% set count = 0 %}
							    {% for article in articles %}
							    	{% if count < 3 and article.featured %}
							    		<li data-target="#myCarousel" data-slide-to="{{ count }}" class="{{ count < 1 ? 'active' : '' }}"></li>
							    		{% set count = count+1 %}
							    	{% endif %}
							    {% endfor %}
						  	</ol>
						  	
						  	<div class="carousel-inner" role="listbox">
							    {% set count = 0 %}
							    {% for article in articles %}
							    	{% if count < 3 and article.featured %}
							    		<div class="item rect-2x1 {{ count < 1 ? 'active' : '' }}">
									    	<img src="{{ asset(article.getImagePath()) }}">
								      		<div class="carousel-caption">
								      			<a class="text-white" href="{{ path('infoprodukt_article_show', { id: article.id }) }}">
									      			<h2>
									      				{{ article.name }}
									      				{{ article.subname }}
									      			</h2>
									      		</a>
											</div>
									    </div>
							    		{% set count = count+1 %}
							    	{% endif %}
							    {% endfor %}
						  	</div>
						  	
						  	<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
						    	<span class="fa fa-chevron-left" aria-hidden="true"></span>
						    	<span class="sr-only">Previous</span>
						  	</a>
						  	<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
						    	<span class="fa fa-chevron-right" aria-hidden="true"></span>
						    	<span class="sr-only">Next</span>
						  	</a>
					  	</div>
				  	</div>
				  	
				  	<div class="col-sm-3">
				  		<a href="#">
				  			<div class="rect-1x2 bkg-white">
				  				<img class="div-center img-responsive" src="{{ asset('img/template/magazyn-sluchawki.png') }}">
				  			</div>
				  		</a>
				  	</div>
			  	</div>
			</div>
		{% endblock %}
		
		<div class="vr-space-80"></div>
		
		{% block news %}
		<div class="container-fluid">
			<div class="row">
				<div class="col-xs-12">
					
					<div class="row no-padding">
						{% include 'common/tile_list.html.twig' with {'entries': articles, 'entryPath': 'article', 'colSize': 3, 'limit': 4, 'tile': 'bottom_rect_tile'} %}
					</div>
					
					<div class="row text-center lowered">
						<a class="btn btn-primary">Czytaj wiecej...</a>
					</div>
				</div>
			</div>
		</div>
		{% endblock %}
		
		<div class="vr-space-80"></div>
		
		{% block articleCategories %}
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<div class="row no-padding">
						{% include 'common/tile_list.html.twig' with {'entries': article_categories, 'entryPath': 'article', 'colSize': 3, 'limit': 4, 'tile': 'bottom_text_tile', 'alternate': true} %}
					</div>
				</div>
			</div>
		</div>
		{% endblock %}
		
		<div class="vr-space-80"></div>
		
		{% block ad %}
		<div class="row">
			<div class="rect-3x1">
	{# 			<img class="div-center" src="{{ asset(entry.getImagePath()) }}">#}
				<img class="div-center" src="{{ asset('img/template/some-img.jpg') }}">
				<div class="div-center text-center">
					<h1>Tutaj bedzie reklama :)</h1>
					<a class="btn btn-default" href="#">Kliknij!</a>
				</div>
			</div>
		</div>
		{% endblock %}
		
		<div class="vr-space-80"></div>
		
		{% block promocje %}
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<div class="row no-padding">
						{% include 'common/tile_list.html.twig' with {'entries': articles, 'entryPath': 'article', 'colSize': 3, 'limit': 4} %}
					</div>
					
					<div class="row text-center lowered">
						<a class="btn btn-primary">Zobacz wiecej...</a>
					</div>
				</div>
			</div>
		</div>
		{% endblock %}
	
	{% else %}
	
		<div class="container">
			<div class="row">
				{% block categoryHeader %}
				<div class="col-xs-12 well">
					<div class="col-sm-3">
						<div class="rect">
							<img class="div-center" src="{{ asset(entry.getImagePath()) }}">
						</div>
					</div>
					
					<div class="col-sm-9">
						<h1>{{ entry.name }}</h1>
						<p>{{ entry.content | raw }}</p>
					</div>	
				</div>
				{% endblock %}
				
				{% block brandsRank %}
				<div class="col-xs-12 well">
					<h1><span class="fa fa-spinner"></span> Rating marek</h1>
					
					<div class="row">
						<div class="col-sm-2"><h4 class="text-center">Segment</h4></div>
						<div class="col-sm-10"><h4 class="text-center">Wiodace marki</h4></div>
					</div>
					
					{% for entry in segments %}
						<div class="row  {{ loop.index % 2 ? 'bkg-lime-green' : '' }}">
							<div class=" col-sm-2 text-white">
								<div class="rect">
									<img class="img-responsive div-center" alt="{{ entry.name }}" src="{{ asset(entry.getImagePath()) }}">
								</div>
							</div>
							{% set i = 1 %}
							{% for brand in brands %}
								{% if i <= 5 %}
									<div class=" col-sm-2 text-white">
										<div class="rect">
											<img class="img-responsive div-center" alt="{{ brand.name }}" src="{{ asset(brand.getImagePath()) }}">
										</div>
									</div>
									{% set i = i+1 %}
								{% endif %}
							{% endfor %}
						</div>
					{% endfor %}
				</div>
				{% endblock %}
				
				{% block productsRank %}
				<div class="col-xs-12 well">
					<h1><span class="fa fa-star-half-o"></span> Top modeli</h1>
					
					<div class="row">
						<div class="col-sm-2"><h4 class="text-center">Segment</h4></div>
						<div class="col-sm-2"><h4 class="text-center">1st</h4></div>
						<div class="col-sm-2"><h4 class="text-center">2nd</h4></div>
						<div class="col-sm-2"><h4 class="text-center">3rd</h4></div>
						<div class="col-sm-2"><h4 class="text-center">4th</h4></div>
						<div class="col-sm-2"><h4 class="text-center">5th</h4></div>
					</div>
					
					{% for entry in segments %}
						<div class="row {{ loop.index % 2 ? 'bkg-lime-green' : '' }}">
							<div class=" col-sm-2 text-white">
								<div class="rect">
									<img class="div-center" alt="{{ entry.name }}" src="{{ asset(entry.getImagePath()) }}">
								</div>
							</div>
							{% set i = 1 %}
							{% for product in products %}
								{% if i <= 5 and product.segment.id == entry.id %}
									<div class=" col-sm-2 text-white">
										<div class="rect">
											<img class="img-responsive div-center" alt="{{ product.name }}" src="{{ asset(product.getImagePath()) }}">
											<div class="col-xs-12 div-bottom bkg-black-50">
												<a class="text-white" href="{{ path('infoprodukt_product_show', {'id': product.id}) }}">
													<h5>{{ product.brand ? product.brand.name : '' }}</h5>
													<h5>{{ product.name }}</h5>
												</a>
											</div>
										</div>
									</div>
									{% set i = i+1 %}
								{% endif %}
							{% endfor %}
						</div>
					{% endfor %}
				</div>
				{% endblock %}
			</div>
		</div>
	
	{% endif %}
	
{% endblock %}
