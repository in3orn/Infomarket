{% extends 'infoprodukt/base/index.html.twig' %}

{% set title = 'title.articles'|trans %}
{% set mainPath = 'article' %}
		
{% block moreSidebarContent %}
	{% block articleCategoriesBlock %}
		<h1>{{ 'title.articleCategories'|trans }}</h1>
		
		{% form_theme articleFilterForm 'form/fields.html.twig' %}
		
		<div class="col-xs-12">
			{{ form_start(articleFilterForm) }}
				{{ form_row(articleFilterForm.articleCategories, { 'label': ' ' }) }}
				
				<div class="btn-group">
					{{ form_widget(articleFilterForm.search, { 'icon': 'fa-search', 'label': 'action.search', 'attr': {'class': 'btn btn-primary'} }) }}
					{{ form_widget(articleFilterForm.clear, { 'icon': 'fa-eraser', 'label': 'action.clear', 'attr': {'class': 'btn btn-warning'} }) }}
				</div>
			{{ form_end(articleFilterForm) }}
		</div>
	{% endblock %}
{% endblock %}



{% block mainContent %}
	{% block articles %}
	<div class="row">
		<div class="col-xs-12">
			<h1>{{ 'title.articles'|trans }}</h1>
			
			{% for entry in entries%}
				<div class="row">
					<div class="panel">
						<div class="panel-body">
							<div class="col-sm-3">
								<div class="rect">
									<img class="div-center" src="{{ asset(entry.getImagePath()) }}">
								</div>
							</div>
							<div class="col-sm-9">
								{% for articleBrandAssignment in entry.articleBrandAssignments %}
									<a href="{{ path(basePath ~ 'brand_show', { id: articleBrandAssignment.brand.id, category: category ? category.id : null }) }}">
										<h3 class="text-red">{{ articleBrandAssignment.brand.name | raw }} </h3>
									</a> 
								{% endfor %}
								
								<a href="{{ path('infoprodukt_' ~ mainPath ~ '_show', { 'id': entry.id, category: category ? category.id : null }) }}">
									<h3>
										<span class="text-brand">{{ entry.name | raw }}</span> 
										<span class="text-red">{{ entry.subname | raw }}</span>
									</h3>
								</a>
								<p class="text-muted">
									<span class="fa fa-calendar"></span> {{ entry.publishedAt | date('Y-m-d') }}
									{% if entry.publishedBy %}
										, <span class="fa fa-user"></span> {{ entry.publishedBy.name }}
									{% endif %}
								</p>
								<p>
									{{ entry.intro | raw }}
								</p>
								<a class="btn btn-danger" href="{{ path('infoprodukt_' ~ mainPath ~ '_show', { 'id': entry.id, category: category ? category.id : null }) }}">
									{{ 'label.readMore'|trans }}
								</a>
								<div class="vr-space-10"></div>
							</div>
						</div>
					</div>
				</div>
			{% else %}
				<p>{{ 'label.noEntries'|trans }}</p>
			{% endfor %}
		</div>
	</div>
	{% endblock %}
	
	{% block paginator %}
	<div class="row">
		<div class="col-xs-12">
	        {{ knp_pagination_render(entries) }}
		</div>
	</div>
	{% endblock %}
{% endblock %}
