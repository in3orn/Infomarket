{% extends 'admin/index.html.twig' %}

{% set mainPath = 'category' %}
{% set title = 'title.ratings'|trans %}

{% block content %}

	{% for segment in entry.segments %}
		<div class="row">
			<h2>{{ 'label.segment'|trans }} {{ segment.name }}</h2>
			
			<div class="row equal">
			
				<div class="col-md-6">
					<div class="row equal">
						<div class="col-xs-6 col-md-3">
							<h3>{{ 'title.products'|trans }}</h3>
						</div>
						<div class="col-xs-6 col-md-3">
							<a href="{{ path('admin_product_category_assignment_new', { category: entry.id, segment: segment.id, route: 'admin_category_ratings', routeParams: { id: entry.id } }) }}"
								class="btn btn-success text-xs-bottom-mm">
								<span class="fa fa-plus"></span> 
								{{ 'action.addProduct'|trans }} 
							</a>
						</div>
					</div>
					
					<table class="table table-striped vert-align">
						<tbody>
						{% for productAssignment in entry.productAssignments %}
							{% if productAssignment.segment.id == segment.id %}
							<tr>
								<td>
									{% if productAssignment.product.brand %}
									<a href="{{ path('admin_brand_show', { id: productAssignment.product.brand.id }) }}"> 
										{{ productAssignment.product.brand.name }}
									</a>
									{% endif %}
								</td>
								<td>
									<a href="{{ path('admin_product_show', { id: productAssignment.product.id }) }}">
										{{ productAssignment.product.name }}
									</a>
								</td>
								<td>
									<a href="{{ path('admin_product_category_assignment_edit', { id: productAssignment.id, route: 'admin_category_ratings', routeParams: { id: entry.id } }) }}" class="btn btn-warning">
										<span class="fa fa-edit"></span> 
										{{ 'action.edit'|trans }}
									</a>
									<a href="{{ path('admin_product_category_assignment_delete', { id: productAssignment.id, route: 'admin_category_ratings', routeParams: { id: entry.id } }) }}" class="btn btn-danger">
										<span class="fa fa-trash"></span> 
										{{ 'action.delete'|trans }}
									</a>
								</td>
							</tr>
							{% endif %}
						{% endfor %}
						</tbody>
					</table>
				</div>
			
				<div class="col-md-6">
					<div class="row equal">
						<div class="col-xs-6 col-md-3">
							<h3>{{ 'title.brands'|trans }}</h3>
						</div>
						<div class="col-xs-6 col-md-3">
							<a href="{{ path('admin_brand_category_assignment_new', { category: entry.id, segment: segment.id, route: 'admin_category_ratings', routeParams: { id: entry.id } }) }}"
								class="btn btn-success text-xs-bottom-mm">
								<span class="fa fa-plus"></span> 
								{{ 'action.addBrand'|trans }} 
							</a>
						</div>
					</div>
					
					<table class="table table-striped vert-align">
						<tbody>
						{% for brandAssignment in entry.brandAssignments %}
							{% if brandAssignment.segment.id == segment.id %}
							<tr>
								<td>
									<a href="{{ path('admin_brand_show', { id: brandAssignment.brand.id }) }}">
										{{ brandAssignment.brand.name }}
									</a>
								</td>
								<td>
									<a href="{{ path('admin_brand_category_assignment_edit', { id: brandAssignment.id, route: 'admin_category_ratings', routeParams: { id: entry.id } }) }}" class="btn btn-warning">
										<span class="fa fa-edit"></span> 
										{{ 'action.edit'|trans }}
									</a>
									<a href="{{ path('admin_brand_category_assignment_delete', { id: brandAssignment.id, route: 'admin_category_ratings', routeParams: { id: entry.id } }) }}" class="btn btn-danger">
										<span class="fa fa-trash"></span> 
										{{ 'action.delete'|trans }}
									</a>
								</td>
							</tr>
							{% endif %}
						{% endfor %}
						</tbody>
					</table>
				</div>
				
			</div>
			
		</div>
	{% endfor %}
		
{% endblock %}