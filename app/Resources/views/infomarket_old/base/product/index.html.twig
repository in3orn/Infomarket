{% extends 'infomarket/index.html.twig' %}

{% set rightPanelButtonLabel = 'label.links'|trans %}		

{% block rightPanelContent %}
	{% block linksBlock %}
		<ul class="nav nav-pills nav-stacked lowered">
			<li class="{% if mainPath == 'product' %}active{% endif %} branch-{{ branch.id }}">
				<a href="{{ path('infomarket_product', {'branch': branch.name }) }}">
					<span class="fa fa-camera-retro"></span> {{ 'title.products'|trans }}</a>
			</li>
			<li class="{% if mainPath == 'brand' %}active{% endif %} branch-{{ branch.id }}">
				<a href="{{ path('infomarket_brand', {'branch': branch.name }) }}">
					<span class="fa fa-globe"></span> {{ 'title.brands'|trans }}</a>
			</li>
			<li class="{% if mainPath == 'term' %}active{% endif %} branch-{{ branch.id }}">
				<a href="{{ path('infomarket_term', {'branch': branch.name }) }}">
					<span class="fa fa-tags"></span> {{ 'title.terms'|trans }}</a>
			</li>
		</ul>
	{% endblock %}
		
	{% block categories %}
		{% if category.name is defined %} 
			{{ category.name }}
		{% endif %}
		
		<ul class="nav nav-list lowered">
			{% for entry in categories %}
				{% include 'common/menu_entry.html.twig' with {'entry': entry } %}
			{% else %}
				No entries found.
			{% endfor %}
		</ul>
			
		<script>
			$('.tree-toggle').click(function () {
				$(this).parent().children('ul.tree').toggle(200);
			});
		</script>
	{% endblock %}
{% endblock %}
	
{% block mainPanel %}
	
	<div class="row">
		<div class="col-xs-12">
			{% block mainPanelContent %}
				<ul class="thumbnails" id="hover-cap-4col">
					{% for entry in entries %}
						<li class="col-sm-4 small">
							<div class="thumbnail">
								<img class="img-responsive" src="{{ asset(entry.getImagePath()) }}">
								<div class="caption">
									<div class="caption-inner">
										<h4>{{ entry.name }}</h4>
										<p>{{ entry.name }}</p>
										<a role="button" class="btn btn-danger"
											href="{{ path('infomarket_' ~ mainPath ~ '_show', {'branch': branch.name, 'id': entry.id }) }}">
											{{ 'label.readMore'|trans }}
										</a>
									</div>
								</div>
							</div>
						</li>
					{% else %}
						No entries found.
					{% endfor %}
				</ul>
				
				<script>
					$(document).ready(function(){
						 
					    $("[rel='tooltip']").tooltip();    
					 
					    $('#hover-cap-4col .thumbnail').hover(
					        function(){
					            $(this).find('.caption').slideDown(250);
					        },
					        function(){
					            $(this).find('.caption').slideUp(250);
					        }
					    );    
					 
					});
				</script>
			{% endblock %}
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-12">
			{% block mainPanelPaginator %}
		        {{ knp_pagination_render(entries) }}
			{% endblock %}
		</div>
	</div>
	
{% endblock %}
