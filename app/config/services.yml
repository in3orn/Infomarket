# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
#    parameter_name: value

services:
    templating.helper.assets: '@assets.packages'
    templating.helper.router: '@router'
#    service_name:
#        class: AppBundle\Directory\ClassName
#        arguments: ["@another_service_name", "plain_value", "%parameter_name%"]
    
    
    # Validators
    validator.node.is_article_tag_assignment_unique:
        class: AppBundle\Validator\Constraints\IsArticleTagAssignmentUniqueValidator
        arguments: ['@doctrine']
        tags:
            - { name: validator.constraint_validator, alias: is_article_tag_assignment_unique }
            
            
    # Voters 
    app.user_voter:
        class: AppBundle\Security\Base\UserVoter
        tags:
            - { name: security.voter }
        public: false
    
    # Twig extensions
    twig.extension.clean_name:
        class: AppBundle\Twig\Extension\CleanNameExtension
        tags:
            - { name: 'twig.extension' }
                
    twig.extension.value_sets:
        class: AppBundle\Twig\Extension\ValueSetsExtension
        tags:
            - { name: 'twig.extension' }
        
    # Form extensions          
    form_extension.form_icon:
        class: AppBundle\Form\Extension\FormTypeIconExtension
        tags:
            - { name: form.type_extension, extended_type: Symfony\Component\Form\Extension\Core\Type\FormType }
    form_extension.button_icon:
        class: AppBundle\Form\Extension\ButtonTypeIconExtension
        tags:
            - { name: form.type_extension, extended_type: Symfony\Component\Form\Extension\Core\Type\ButtonType }
            
            
    
    # Choices Factories
    app.factory.choices.advert.locations:
        class: AppBundle\Factory\Common\Choices\AdvertLocationsFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.article.imageSizes:
        class: AppBundle\Factory\Common\Choices\ArticleImageSizesFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.article.layouts:
        class: AppBundle\Factory\Common\Choices\ArticleLayoutsFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.benchmarkField.betterThanTypes:
        class: AppBundle\Factory\Common\Choices\BenchmarkFieldBetterThanTypesFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.benchmarkField.fieldTypes:
        class: AppBundle\Factory\Common\Choices\BenchmarkFieldFieldTypesFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.benchmarkField.noteTypes:
        class: AppBundle\Factory\Common\Choices\BenchmarkFieldNoteTypesFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.benchmarkMessage.states:
        class: AppBundle\Factory\Common\Choices\BenchmarkMessageStatesFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
    app.factory.choices.user.roles:
        class: AppBundle\Factory\Common\Choices\UserRolesFactory
        arguments:
            - '@translator'
        tags:
            - { name: app.factory }
            
    # Common Repositories
    app.repository.advert:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Advert
        tags:
            - { name: app.repository }
    app.repository.article:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Article
        tags:
            - { name: app.repository }
    app.repository.article_category:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\ArticleCategory
        tags:
            - { name: app.repository }
    app.repository.branch:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Branch
        tags:
            - { name: app.repository }
    app.repository.brand:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Brand
        tags:
            - { name: app.repository }
    app.repository.category:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Category
        tags:
            - { name: app.repository }
    app.repository.link:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Link
        tags:
            - { name: app.repository }
    app.repository.magazine:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Magazine
        tags:
            - { name: app.repository }
    app.repository.menu:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Menu
        tags:
            - { name: app.repository }
    app.repository.menu_entry:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\MenuEntry
        tags:
            - { name: app.repository }
    app.repository.newsletter_block:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\NewsletterBlock
        tags:
            - { name: app.repository }
    app.repository.newsletter_block_template:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\NewsletterBlockTemplate
        tags:
            - { name: app.repository }
    app.repository.newsletter_group:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\NewsletterGroup
        tags:
            - { name: app.repository }
    app.repository.newsletter_page:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\NewsletterPage
        tags:
            - { name: app.repository }
    app.repository.newsletter_page_template:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\NewsletterPageTemplate
        tags:
            - { name: app.repository }
    app.repository.newsletter_user:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\NewsletterUser
        tags:
            - { name: app.repository }
    app.repository.page:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Page
        tags:
            - { name: app.repository }
    app.repository.product:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Product
        tags:
            - { name: app.repository }
    app.repository.tag:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Tag
        tags:
            - { name: app.repository }
    app.repository.term:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\Term
        tags:
            - { name: app.repository }
    app.repository.user:
        class: Doctrine\ORM\EntityRepository
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - AppBundle\Entity\User
        tags:
            - { name: app.repository }


    # Basic Transformers
    app.form.transformer.integer_2_boolean:
        class: AppBundle\Form\Transformer\IntegerToBooleanTransformer
        tags:
            - { name: form.transformer }
    
    # Entity Transformers
    app.form.transformer.advert_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.advert"]
        tags:
            - { name: form.transformer }
    app.form.transformer.article_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.article"]
        tags:
            - { name: form.transformer }
    app.form.transformer.article_category_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.article_category"]
        tags:
            - { name: form.transformer }
    app.form.transformer.branch_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.branch"]
        tags:
            - { name: form.transformer }
    app.form.transformer.brand_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.brand"]
        tags:
            - { name: form.transformer }
    app.form.transformer.category_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.category"]
        tags:
            - { name: form.transformer }
    app.form.transformer.link_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.link"]
        tags:
            - { name: form.transformer }
    app.form.transformer.magazine_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.magazine"]
        tags:
            - { name: form.transformer }
    app.form.transformer.menu_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.menu"]
        tags:
            - { name: form.transformer }
    app.form.transformer.menu_entry_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.menu_entry"]
        tags:
            - { name: form.transformer }
    app.form.transformer.newsletter_block_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.newsletter_block"]
        tags:
            - { name: form.transformer }
    app.form.transformer.newsletter_block_template_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.newsletter_block_template"]
        tags:
            - { name: form.transformer }
    app.form.transformer.newsletter_group_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.newsletter_group"]
        tags:
            - { name: form.transformer }
    app.form.transformer.newsletter_page_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.newsletter_page"]
        tags:
            - { name: form.transformer }
    app.form.transformer.newsletter_page_template_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.newsletter_page_template"]
        tags:
            - { name: form.transformer }
    app.form.transformer.newsletter_user_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.newsletter_user"]
        tags:
            - { name: form.transformer }
    app.form.transformer.page_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.page"]
        tags:
            - { name: form.transformer }
    app.form.transformer.product_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.product"]
        tags:
            - { name: form.transformer }
    app.form.transformer.term_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.term"]
        tags:
            - { name: form.transformer }
    app.form.transformer.tag_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.tag"]
        tags:
            - { name: form.transformer }
    app.form.transformer.user_2_number:
        class: AppBundle\Form\Transformer\EntityToNumberTransformer
        arguments: ["@app.repository.user"]
        tags:
            - { name: form.transformer }

    
    # FormBuilders
    app.form.builder.editor.benchmark_field:
        class: AppBundle\Form\FormBuilder\BenchmarkFieldEditorBuilder
        arguments: ["@app.form.transformer.integer_2_boolean"]
        tags:
            - { name: form.builder }
    
    # Forms        
    app.form.registration:
        class: AppBundle\Form\Registration\UserRegistrationType
        tags:
            - { name: form.type, alias: app_user_registration }
            
    # Assignment Editors
    app.form.editor.advert_category_assignment:
        class: AppBundle\Form\Editor\Assignments\AdvertCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.advert_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.article_article_category_assignment:
        class: AppBundle\Form\Editor\Assignments\ArticleArticleCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.article_2_number",
            "@app.form.transformer.article_category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.article_brand_assignment:
        class: AppBundle\Form\Editor\Assignments\ArticleBrandAssignmentEditorType
        arguments: [
            "@app.form.transformer.article_2_number",
            "@app.form.transformer.brand_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.article_category_assignment:
        class: AppBundle\Form\Editor\Assignments\ArticleCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.article_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.article_tag_assignment:
        class: AppBundle\Form\Editor\Assignments\ArticleTagAssignmentEditorType
        arguments: [
            "@app.form.transformer.article_2_number",
            "@app.form.transformer.tag_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.branch_category_assignment:
        class: AppBundle\Form\Editor\Assignments\BranchCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.branch_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.brand_category_assignment:
        class: AppBundle\Form\Editor\Assignments\BrandCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.brand_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.magazine_branch_assignment:
        class: AppBundle\Form\Editor\Assignments\MagazineBranchAssignmentEditorType
        arguments: [
            "@app.form.transformer.magazine_2_number",
            "@app.form.transformer.branch_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.magazine_category_assignment:
        class: AppBundle\Form\Editor\Assignments\MagazineCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.magazine_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.menu_entry_branch_assignment:
        class: AppBundle\Form\Editor\Assignments\MenuEntryBranchAssignmentEditorType
        arguments: [
            "@app.form.transformer.menu_entry_2_number",
            "@app.form.transformer.branch_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.menu_entry_category_assignment:
        class: AppBundle\Form\Editor\Assignments\MenuEntryCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.menu_entry_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.menu_menu_entry_assignment:
        class: AppBundle\Form\Editor\Assignments\MenuMenuEntryAssignmentEditorType
        arguments: [
            "@app.form.transformer.menu_2_number",
            "@app.form.transformer.menu_entry_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.newsletter_block_advert_assignment:
        class: AppBundle\Form\Editor\Assignments\NewsletterBlockAdvertAssignmentEditorType
        arguments: [
            "@app.form.transformer.newsletter_block_2_number",
            "@app.form.transformer.advert_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.newsletter_block_article_assignment:
        class: AppBundle\Form\Editor\Assignments\NewsletterBlockArticleAssignmentEditorType
        arguments: [
            "@app.form.transformer.newsletter_block_2_number",
            "@app.form.transformer.article_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.newsletter_block_magazine_assignment:
        class: AppBundle\Form\Editor\Assignments\NewsletterBlockMagazineAssignmentEditorType
        arguments: [
            "@app.form.transformer.newsletter_block_2_number",
            "@app.form.transformer.magazine_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.newsletter_user_newsletter_group_assignment:
        class: AppBundle\Form\Editor\Assignments\NewsletterUserNewsletterGroupAssignmentEditorType
        arguments: [
            "@app.form.transformer.newsletter_user_2_number",
            "@app.form.transformer.newsletter_group_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.product_category_assignment:
        class: AppBundle\Form\Editor\Assignments\ProductCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.product_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.term_category_assignment:
        class: AppBundle\Form\Editor\Assignments\TermCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.term_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
    app.form.editor.user_category_assignment:
        class: AppBundle\Form\Editor\Assignments\UserCategoryAssignmentEditorType
        arguments: [
            "@app.form.transformer.user_2_number",
            "@app.form.transformer.category_2_number"]
        tags:
            - { name: form.type }
            
    # Main Editors      
    app.form.editor.article:
        class: AppBundle\Form\Editor\Main\ArticleEditorType
        arguments: 
            - "@app.form.transformer.article_2_number"
            - "@app.form.transformer.user_2_number"
        tags:
            - { name: form.type }
    app.form.editor.benchmark_field:
        class: AppBundle\Form\Editor\Main\BenchmarkFieldEditorType
        arguments:
            - "@app.form.transformer.category_2_number"
        tags:
            - { name: form.type }
    app.form.editor.category:
        class: AppBundle\Form\Editor\Main\CategoryEditorType
        arguments:
            - "@app.form.transformer.category_2_number"
        tags:
            - { name: form.type }
    app.form.editor.magazine:
        class: AppBundle\Form\Editor\Main\MagazineEditorType
        arguments:
            - "@app.form.transformer.magazine_2_number"
        tags:
            - { name: form.type }
    app.form.editor.menu_entry:
        class: AppBundle\Form\Editor\Main\MenuEntryEditorType
        arguments:
            - "@app.form.transformer.menu_entry_2_number"
            - "@app.form.transformer.page_2_number"
            - "@app.form.transformer.link_2_number"
        tags:
            - { name: form.type }
    app.form.editor.newsletter_block:
        class: AppBundle\Form\Editor\Main\NewsletterBlockEditorType
        arguments:
            - "@app.form.transformer.newsletter_page_2_number"
            - "@app.form.transformer.newsletter_block_template_2_number"
        tags:
            - { name: form.type }
    app.form.editor.newsletter_page:
        class: AppBundle\Form\Editor\Main\NewsletterPageEditorType
        arguments: 
            - "@app.form.transformer.newsletter_page_template_2_number"
        tags:
            - { name: form.type }

    # Others
    app.form.category_filter:
        class: AppBundle\Form\Filter\Admin\Other\CategoryFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }
            
    app.form.article_tag_assignments:
        class: AppBundle\Form\Other\ArticleTagAssignmentsType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }    
            
    app.form.send_newsletter_filter:
        class: AppBundle\Form\Filter\Admin\Other\SendNewsletterFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }      
            
    app.form.import_newsletter_users:
        class: AppBundle\Form\Other\ImportNewsletterUsersType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }      
            
    # Benchmark        
    app.benchmark.category_filter:
        class: AppBundle\Form\Benchmark\CategoryFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }
    app.benchmark.subcategory_filter:
        class: AppBundle\Form\Benchmark\SubcategoryFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }
    app.benchmark.product_filter:
        class: AppBundle\Form\Benchmark\ProductFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }
            
    # Washers //TODO change to one common Product filter
    app.benchmark.washer_filter:
        class: AppBundle\Form\Benchmark\Washer\WasherFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }
    app.benchmark.centrifuge_filter:
        class: AppBundle\Form\Benchmark\Washer\CentrifugeFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }
    app.benchmark.washer_centrifuge_filter:
        class: AppBundle\Form\Benchmark\Washer\WasherCentrifugeFilterType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }